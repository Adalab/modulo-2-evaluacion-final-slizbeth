{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconsole.log('>> Ready :)');\n\nconst inputSerie = document.querySelector('#user-serie');\nconst buttonSearch = document.querySelector('#search-button');\nconst elementUl = document.querySelector('#shows-list');\nconst elementUlFav = document.querySelector('#shows-list--favs');\nconst form = document.querySelector('#js-form');\nconst title = document.querySelector('#title-fav');\nconst btnRemoveAll = document.querySelector('#remove-button');\nlet favListShows = [];\n\n//****CONEXIÃ“N CON LA API****//\nconst connectToAPI = () => {\n    const inputSerieValue = inputSerie.value;\n    fetch(`http://api.tvmaze.com/search/shows?q=${inputSerieValue}`)\n        .then((response) => response.json())\n        .then(dataResponse => {\n            dataResponse.length !== 0 ? showData(dataResponse) : emptyData();\n        })\n        .catch(error => console.log('error', error));\n}\n\n//****MOSTRAR DATOS****//\nconst showData = (dataResponse) => {\n    elementUl.innerHTML = '';\n    document.querySelector('#title-fav').innerHTML = '~Mis series favoritas~';\n    for (let i = 0; i < dataResponse.length; i++) {\n\n        const liElement = document.createElement('li');\n        const imgElement = document.createElement('img');\n        const pElement = document.createElement('p');\n        const pContent = document.createTextNode(dataResponse[i].show.name);\n        liElement.classList.add('li-element');\n        let imagen = dataResponse[i].show.image;\n        if (imagen === null) {\n            imgElement.src = 'https://via.placeholder.com/210x295/ffffff/666666/?text=TV.';\n        } else {\n            imgElement.src = dataResponse[i].show.image.medium;\n        }\n        pElement.appendChild(pContent);\n        liElement.appendChild(pElement);\n        liElement.appendChild(imgElement);\n        liElement.addEventListener('click', addFav);\n        elementUl.appendChild(liElement);\n    }\n}\n\n//****AÃ‘ADIR A FAVORITOS****//\nconst addFav = (event) => {\n    \n    event.currentTarget.classList.toggle('selected');\n    console.log(event.currentTarget );\n    ///NEW///\n    if(event.currentTarget.classList.contains(\"selected\")){\n        setLocalStorage();\n    }else{\n        console.log('no tiene clase selected');\n        elementUlFav.innerHTML='';\n    }\n}\n\n//****SET FAVORITOS A LOCAL STORAGE****//\nconst setLocalStorage = () => {\n    //recogo en varibles los elementos seleccionados\n    /**NEW**/\n    let nameShowFav = event.currentTarget.firstChild.textContent;\n    let imgShowFav = event.currentTarget.lastChild.src;\n\n    //creo un objeto con las series seleccionadas\n    const showObject = {\n        \"name\": nameShowFav,\n        \"img\": imgShowFav\n    }\n    ///////////NEW////////////\n    let removeIndex = favListShows.map(function(favListShow) {\n        return favListShow.name; \n    }).indexOf(nameShowFav);\n\n    if(removeIndex === -1){\n        favListShows.push(showObject);\n        paintNewFavShow(showObject);\n        btnRemoveAll.classList.remove('hidden');\n    }else{\n        console.log('ya existe no se aÃ±ade al array');\n    }\n    \n\n    localStorage.setItem('favListShows', JSON.stringify(favListShows));\n\n    \n   \n}\n\n//****PINTO ELEMENTOS EN HTML AL GUARDAR EN LOCAL STORAGE****//\nconst paintNewFavShow = (showObject) => {\n    const liElement = document.createElement('li');\n    const imgElement = document.createElement('img');\n    const pElement = document.createElement('p');\n    const iElement = document.createElement('i'); \n    const pContent = document.createTextNode(showObject.name);\n    imgElement.src = showObject.img;\n    imgElement.classList.add(\"fav-img\");\n    pElement.classList.add(\"fav-name\")\n    iElement.classList.add('fas');\n    iElement.classList.add('fa-times-circle');\n    iElement.classList.add('fav-icon');\n    liElement.classList.add('li-element');\n    iElement.addEventListener('click', removeLocalStorage);\n    pElement.appendChild(pContent);\n    liElement.appendChild(pElement);\n    liElement.appendChild(imgElement);\n    liElement.appendChild(iElement);\n    elementUlFav.appendChild(liElement);\n}\n\n//****GET FAVORITOS DE LOCAL STORAGE****//\nconst getLocalStorage = () => {\n    const mylocalStorage = localStorage.getItem(\"favListShows\");\n    if (mylocalStorage !== null) {\n        favListShows = JSON.parse(mylocalStorage);\n        paintFavShows(favListShows);\n        btnRemoveAll.classList.remove('hidden');\n    }else{\n        btnRemoveAll.classList.add('hidden');\n    }\n}\n\n//****PINTO ELEMENTOS EN HTML QUE SE ENCUENTRAN EN LOCAL STORAGE****//\nconst paintFavShows = (favShows) => {\n    for (let favShow of favShows) {\n        paintNewFavShow(favShow)\n    }\n}\n\n\n/////////////BONUS//////////////////////77\n\n//****BORRAR TODO DEL LOCAL STORAGE Y DE HTML****//\nconst removeAllLocalStorage = () => {\n    localStorage.removeItem('favListShows');\n    elementUlFav.innerHTML = '';\n}\n\n//tecla intro//\nfunction sumbitForm(event) {\n    event.preventDefault();\n    connectToAPI();\n}\n\n//Si no hay datos muestra mensaje\nconst emptyData = () =>{\n    document.querySelector('#title-fav').innerHTML = 'ðŸ˜± No hemos encontrado nada ðŸ˜±';\n}\n/**NEW**/\n//****BORRAR EL FAVORITO SELECCIONADO DE LOCAL STORAGE Y DE HTML****//\nconst removeLocalStorage = () => {  \n    let nameShowFav = '';\n    //elimina del html los fav al dar a la cruz\n    const elementRemove = event.currentTarget;\n    const parentelementR = event.currentTarget.parentElement;\n    parentelementR.remove(elementRemove);\n    \n    nameShowFav = parentelementR.firstChild.textContent;\n\n    let removeIndex = favListShows.map(function(favListShow) {\n        return favListShow.name; \n      }).indexOf(nameShowFav);\n      \n    // remove object an local\n    if(removeIndex >= 0){\n        favListShows.splice(removeIndex, 1);\n        localStorage.setItem('favListShows', JSON.stringify(favListShows));\n    }\n}\n\nbuttonSearch.addEventListener('click', connectToAPI);\nwindow.addEventListener('load', getLocalStorage);\nform.addEventListener('submit', sumbitForm);\nbtnRemoveAll.addEventListener('click', removeAllLocalStorage);"]}