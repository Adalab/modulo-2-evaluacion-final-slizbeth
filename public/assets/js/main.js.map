{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconsole.log('>> Ready :)');\n\nconst inputSerie = document.querySelector('#user-serie');\nconst buttonSearch = document.querySelector('#search-button');\nconst elementUl = document.querySelector('#shows-list');\nconst elementUlFav = document.querySelector('#shows-list--favs');\nconst form = document.querySelector('.form');\nlet favListShows = [];\n\n//****CONEXIÓN CON LA API****//\nconst connectToAPI = () => {\n    const inputSerieValue = inputSerie.value;\n    fetch(`http://api.tvmaze.com/search/shows?q=${inputSerieValue}`)\n    .then((response) => response.json())\n    .then(dataResponse =>  showData(dataResponse))\n    .catch(err => console.log('error', err));\n}\n\n//****MOSTRAR DATOS****//\nconst showData = (dataResponse) => {\n    elementUl.innerHTML = '';\n    for (let i=0; i<dataResponse.length; i++) {\n\n        const liElement = document.createElement('li');\n        const imgElement = document.createElement('img');\n        const pElement = document.createElement('p');\n        const pContent = document.createTextNode(dataResponse[i].show.name);\n        liElement.classList.add('color');\n        let imagen = dataResponse[i].show.image;\n        if(imagen === null){\n            imgElement.src = 'https://via.placeholder.com/210x295/ffffff/666666/?text=TV.';\n        }else{\n            imgElement.src = dataResponse[i].show.image.medium;\n        }\n        pElement.appendChild(pContent);\n        liElement.appendChild(pElement);\n        liElement.appendChild(imgElement);\n        liElement.addEventListener('click', addFav);\n        elementUl.appendChild(liElement);\n    }\n}\n\n//****AÑADIR A FAVORITOS****//\nconst addFav = (event) => {\n    event.currentTarget.classList.toggle('selected')\n    //event.currentTarget.style = 'background-color:blue; color:#fff';\n    setLocalStorage();\n}\n\n//****SET FAVORITOS A LOCAL STORAGE****//\nconst setLocalStorage = () => {\n    //recogo en varibles los elementos seleccionados\n    let nameShowFav = event.currentTarget.innerText;\n    let imgShowFav = event.target.src;\n\n    //creo un objeto con las series seleccionadas\n    const showObject = {\n        \"name\" : nameShowFav,\n        \"img\" : imgShowFav\n      }\n    \n    //relleno el array con el objeto\n    favListShows.push(showObject);\n\n    localStorage.setItem('favListShows',JSON.stringify(favListShows));\n    \n    paintNewFavShow(showObject);\n}\n\n//****PINTO ELEMENTOS EN HTML AL GUARDAR EN LOCAL STORAGE****//\nconst paintNewFavShow = (showObject) => {\n    elementUlFav.innerHTML += `<p>${showObject.name}</p><img src=${showObject.img}><br>`;\n    const iElement = document.createElement('i');\n    iElement.classList.add('fas');\n    iElement.classList.add('fa-times-circle');\n    iElement.addEventListener('click', removeLocalStorage);\n    iElement.classList.add('cross');\n    elementUlFav.appendChild(iElement);\n    \n}\n\n//****GET FAVORITOS DE LOCAL STORAGE****//\nconst getLocalStorage = () => {\n    const mylocalStorage = localStorage.getItem(\"favListShows\");\n    if(mylocalStorage !== null) {\n        favListShows = JSON.parse(mylocalStorage);\n        paintFavShows(favListShows);\n    } \n}\n\n//****PINTO ELEMENTOS EN HTML QUE SE ENCUENTRAN EN LOCAL STORAGE****//\nconst paintFavShows = (favShows) => {\n    for(let favShow of favShows) {\n        paintNewFavShow(favShow)\n    }\n\n    //boton remove\n    const bntElement = document.createElement('button');\n    bntElement.type = 'button';\n    bntElement.innerText = 'Reset :(';\n    bntElement.classList.add('bnt');\n    bntElement.style = 'margin: 15px';\n    bntElement.addEventListener('click', removeAllLocalStorage);\n    elementUlFav.appendChild(bntElement);\n}\n\n//****BORRAR TODO DEL LOCAL STORAGE Y DE HTML****//\nconst removeAllLocalStorage = () => {\n    localStorage.removeItem('favListShows');\n    elementUlFav.innerHTML= '';\n}\n\n//****BORRAR EL FAVORITO SELECCIONADO DE LOCAL STORAGE Y DE HTML****//\nconst removeLocalStorage = () => {\n    console.log('Yo debería borrar la serie seleccionada');\n}\n\n//tecla intro//\nfunction sumbitForm(event){\n    event.preventDefault();\n    connectToAPI();\n}\n\nbuttonSearch.addEventListener('click', connectToAPI);\nwindow.addEventListener('load', getLocalStorage);\nform.addEventListener('submit', sumbitForm);"]}